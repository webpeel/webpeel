# WebPeel

> Free, open-source web fetcher for AI agents. Extracts clean markdown from any webpage with smart escalation (HTTP → Browser → Stealth).

## Quick Start

```bash
# CLI
npm install -g webpeel && webpeel "https://example.com"

# Library
import { peel } from 'webpeel';
const result = await peel('https://example.com');

# MCP Server (Claude Desktop / Cursor / VS Code / Windsurf / Cline / OpenClaw)
npx -y webpeel mcp

# Hosted API
curl "https://api.webpeel.dev/v1/fetch?url=https://example.com" \
  -H "Authorization: Bearer wp_live_your_api_key"
```

## MCP Tools (11)

- `webpeel_fetch` — Fetch a URL, return clean markdown. Params: url (required), render, stealth, wait, format, screenshot, selector, exclude, headers, actions, maxTokens, extract
- `webpeel_search` — Search the web via DuckDuckGo. Params: query (required), count (1-10)
- `webpeel_batch` — Fetch multiple URLs concurrently. Params: urls (required), concurrency, render, format, selector
- `webpeel_crawl` — Crawl a website following links. Params: url (required), maxPages, maxDepth, allowedDomains, excludePatterns, render, stealth, sitemapFirst
- `webpeel_map` — Discover all URLs on a domain via sitemap.xml & link crawling. Params: url (required), maxUrls, includePatterns, excludePatterns
- `webpeel_extract` — Extract structured data using CSS selectors or JSON schema. Params: url (required), selectors, schema, render
- `webpeel_brand` — Extract branding info (colors, fonts, logos, design system). Params: url (required)
- `webpeel_change_track` — Monitor content changes over time with diff detection. Params: url (required), selector, format
- `webpeel_summarize` — Summarize page content. Params: url (required), maxLength, format
- `webpeel_answer` — Answer a question about a page's content. Params: url (required), question (required)
- `webpeel_screenshot` — Capture a page as PNG screenshot. Params: url (required), fullPage, width, height, selector

## MCP Configuration

Works with: Claude Code, Claude Desktop, Cursor, VS Code (Cline), Windsurf, Continue.dev, OpenClaw, and any MCP-compatible client.

```json
{
  "mcpServers": {
    "webpeel": {
      "command": "npx",
      "args": ["-y", "webpeel", "mcp"]
    }
  }
}
```

For Claude Code: `claude mcp add webpeel -- npx -y webpeel mcp`

## API Endpoints

- `GET /v1/fetch?url=<url>` — Fetch and extract content from a URL
- `POST /v1/fetch` — Fetch with JSON body (supports inline extraction)
- `GET /v1/search?q=<query>` — Search the web (DuckDuckGo or Brave)
- `POST /v1/crawl` — Start async crawl job
- `GET /v1/crawl/:id` — Get crawl job status / results

## Key Features

- **Smart escalation**: HTTP → Browser → Stealth (only upgrades when needed)
- **Anti-bot stealth mode**: bypasses Cloudflare, JavaScript walls, 403s
- **Page actions**: click, scroll, type, fill, select, press, hover, waitForSelector (execute before extraction)
- **Structured extraction**: extract data using CSS selectors or JSON schema validation
- **PDF parsing**: automatic PDF detection with text extraction and metadata (title, author, pages)
- **Map/Sitemap discovery**: discover all URLs on a domain via sitemap.xml, sitemap index, robots.txt & link crawling
- **Token budget**: intelligently truncate output to a maximum token count
- **Search**: built-in DuckDuckGo integration
- **Crawl**: follow links, respect robots.txt, rate limiting, BFS/DFS strategy, content deduplication
- **Screenshot**: capture pages as PNG
- **Branding extraction**: extract design systems, colors, fonts, and brand assets
- **Change tracking**: monitor content changes over time with diff detection
- **CSS selectors**: extract specific page sections
- **Token-optimized**: strips navigation, ads, scripts, cookie banners
- **Metadata extraction**: title, description, author, published date, links
- **Local-first**: runs on your machine, no API key required for CLI
- **SSRF protection**: blocks private IPs, redirect attacks
- **TypeScript-native**: full type definitions

## Pricing (Hosted API — Weekly Reset)

**All features available on all plans.** Only usage limits differ. No feature-gating.

| Plan | Price | Weekly Fetches | Burst Limit | Features | Extra Usage |
|------|-------|---------------|-------------|----------|-------------|
| CLI  | $0    | ∞ (local)     | N/A         | All      | N/A         |
| Free | $0    | 125/wk        | 25/hr       | All      | ❌          |
| Pro  | $9/mo | 1,250/wk      | 100/hr      | All      | ✅          |
| Max  | $29/mo| 6,250/wk      | 500/hr      | All      | ✅          |

All plans include: stealth mode, crawl, batch, search, page actions, structured extraction, PDF parsing, sitemap discovery

Extra usage rates: Basic $0.002, Stealth $0.01, Search $0.001

## Comparison

| Feature | WebPeel | Firecrawl | Jina Reader | MCP Fetch |
|---------|---------|-----------|-------------|-----------|
| Local free | ✅ Unlimited | ❌ Cloud only | ❌ Cloud only | ✅ Free |
| JS rendering | ✅ Auto | ✅ Always | ❌ No | ❌ No |
| MCP native | ✅ Built-in | ✅ Separate pkg | ❌ No | ✅ Yes |
| Stealth mode | ✅ Anti-detect | ✅ Yes | ⚠️ Limited | ❌ No |
| Search | ✅ Built-in | ❌ No | ❌ No | ❌ No |
| Crawl | ✅ Built-in | ✅ Yes | ❌ No | ❌ No |
| Price | Free / $9/mo | $16/mo | $10/mo | Free |
| License | AGPL-3.0 | AGPL-3.0 | Proprietary | MIT |

## Links

- Website: https://webpeel.dev
- GitHub: https://github.com/webpeel/webpeel
- npm: https://www.npmjs.com/package/webpeel
- Dashboard: https://app.webpeel.dev
- API: https://api.webpeel.dev
